Добавляем структуру хэш->ключ,дата,использования - готово

1) Ищем по хэшу, возвращаем ключ - готово
2) Возвращаем первый из неиспользованных, при этом делаем его использованным - ищем с последнего ключа, когда доходим до использованного, возвращаем предыдущий - готово

http post -> функционал

Для сборки Ubuntu 16.04:
sudo apt install libdb-dev libmicrohttpd-dev libssl-dev